<!DOCTYPE html>
<html lang="en">

<head>
	${require('./partials/shared/_head.html')}

	<title>FII Student - Profesori</title>

	<script>
		const title = 'Profesori';
		const subtitle = 'Află informații despre profesorii tăi preferați';
		const shouldBeLoggedIn = true;
	</script>
</head>

<body>
	${require('./partials/shared/navbar.html')}
	${require('./partials/modals/quick-email.modal.html')}

	${require('./partials/shared/page-header.html')}

	<div class="container-fluid">
		<div class="container">
			<div class="section text-left" id="teachers-list">
				<div class="row">
					<div class="col-sm-12">
						<h1 class="title mb-0 ">Profesori</h1>
						<hr>
						</hr>
					</div>
				</div>
			</div>
		</div>
	</div>

	${require('./partials/shared/footer.html')}

	<script>
		$(document).ready(function () {
			$.ajax({
				url: endpoint + "professors",
				type: "GET",
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				beforeSend: function (xhr) {
					xhr.setRequestHeader('Authorization', 'Bearer ' + sessionStorage.getItem("accessToken"));
				},
				success: function (result) {
					var list = JSON.parse(result);

					//$('#teachers-list').html('');
					console.log(list)
					list.forEach(teacher => {
						var title = "";
						if(teacher.title) {
							title = ", " + teacher.title;
						}

						$('#teachers-list').append(
							"<div class='row'>" +
							"	<div class='col-sm-9'>" +
							"		<h4 class='secondary-title'>" +
							"			"+teacher.name + title +
							"		</h4>" +
							"		<p>" +
							"			<strong>Birou: </strong>" + teacher.office +
							"		</p>" +
							"		<p>" +
							"			<strong>Adresă Web: </strong>" +
							"			<a href='" + teacher.link + "' class='external' target='_blank'>"+teacher.link+"</a>" +
							"		</p>" +
							"		<p>" +
							"			<strong>" +
							"				Materie predată:" +
							"			</strong>" +
							"			Rețele de calculatoare" +
							"		</p>" +
							"	</div>" +
							"	<div class='col-sm-3'>" +
							"		<a href='javascript:void(0)' class='btn btn-info' onclick='sendEmail(\""+teacher.id+"\")' role='button' data-toggle='modal' data-target='#quickEmailModal'>Email</a>" +
							"	</div>" +
							"</div>" +
							"<hr>");
					}); 
				},
				error: function () {
					alert('Oh-oh! Ceva nu a mers bine!')
				}
			})
		})
	</script>
</body>

</html>