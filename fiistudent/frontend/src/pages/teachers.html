<!DOCTYPE html>
<html lang="en">

<head>
	${require('./partials/shared/_head.html')}

	<title>FII Student - Profesori</title>

	<script>
		const title = 'Profesori';
		const subtitle = 'Află informații despre profesorii tăi preferați';
		const shouldBeLoggedIn = true;
	</script>
</head>

<body>
	${require('./partials/modals/quick-email.modal.html')}

	<div class="d-flex" id="wrapper">
		${require('./partials/shared/sidebar.html')}

		<div id="page-content-wrapper" class="bg-light">
			${require('./partials/shared/page-header.html')}

			<div class="container">
				<div class="m-4">
					<div class="row" id="teachers-list">

					</div>
				</div>
			</div>
		</div>
	</div>


	<script>
		$(document).ready(function () {
			$.ajax({
				url: endpoint + "professors",
				type: "GET",
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				beforeSend: function (xhr) {
					xhr.setRequestHeader('Authorization', 'Bearer ' + sessionStorage.getItem("accessToken"));
				},
				success: function (result) {
					var list = JSON.parse(result);

					$('#teachers-list').html('');

					list.forEach(teacher => {
						var title = "";
						if (teacher.title) {
							title = ", " + teacher.title;
						}

						$('#teachers-list').append(
							"	<div class='col-md-6 teacher'>" +
							"		<h4 class='secondary-title'>" +
							"			" + teacher.name + title +
							"		</h4>" +
							"		<p>" +
							"			<strong>Birou: </strong>" + teacher.office +
							"		</p>" +
							"		<p>" +
							"			<strong>Adresă Web: </strong>" +
							"			<a href='" + teacher.link + "' class='external' target='_blank'>" + teacher.link + "</a>" +
							"		</p>" +
							"		<p>" +
							"			<strong>" +
							"				Materie predată:" +
							"			</strong>" +
							"			Rețele de calculatoare" +
							"		</p>" +
							"		<a href='javascript:void(0)' class='btn btn-primary' onclick='sendEmail(\"" + teacher.id + "\")' role='button' data-toggle='modal' data-target='#quickEmailModal'>Email</a>" +
							"	</div>");
					});
				},
				error: function () {
					alert('Oh-oh! Ceva nu a mers bine!')
				}
			})
		})
	</script>
</body>

</html>