<!DOCTYPE html>
<html lang="en">

<head>
	${require('./partials/shared/_head.html')}

	<title>FII Student - Orar</title>

	<script>
		const title = 'Orar';
		const subtitle = 'Ce vei face astăzi?';
		const shouldBeLoggedIn = true;
	</script>

</head>

<body>

	<div class="d-flex" id="wrapper">
		${require('./partials/shared/sidebar.html')}

		<div id="page-content-wrapper" class="bg-white">
			${require('./partials/shared/page-header.html')}

			<div class="container overflow-auto">
				<div class="section">
					<div class="content">
						<table class="table schedule">
							<thead>
								<tr>
								<tr>
									<th scope="col"></th>
									<th scope="col" class="head-col">Luni</th>
									<th scope="col" class="head-col">Marți</th>
									<th scope="col" class="head-col">Miercuri</th>
									<th scope="col" class="head-col">Joi</th>
									<th scope="col" class="head-col">Vineri</th>
									<th scope="col" class="head-col">Sâmbătă</th>
								</tr>
								</tr>
							</thead>
							<tbody>
								<tr id="h8">
									<th scope="row">8:00</th>
									<td class="Luni">
									</td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
								<tr id="h10">
									<th scope="row">10:00</th>
									<td class="Luni"></td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
								<tr id="h12">
									<th scope="row">12:00</th>
									<td class="Luni"></td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
								<tr id="h14">
									<th scope="row">14:00</th>
									<td class="Luni"></td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
								<tr id="h16">
									<th scope="row">16:00</th>
									<td class="Luni"></td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
								<tr id="h18">
									<th scope="row">18:00</th>
									<td class="Luni"></td>
									<td class="Marti"></td>
									<td class="Miercuri"></td>
									<td class="Joi"></td>
									<td class="Vineri"></td>
									<td class="Sambata"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	${require('./partials/modals/subject-details.modal.html')}
</body>
<script>
	function getObjectHtml(object) {
		return "" +
			"<div class=\"object\" data-toggle=\"modal\" data-target=\"#detailsModal\">" +
			"<p class=\"name\">" + object.name + "</p>" +
			"<p class=\"object-teacher\">" + object.teacher + "</p>" +
			"<div class=\"badges\">" +
			"<span class=\"badge " + object.type + "\">" + object.type + "</span>" +
			"<span class=\"badge room\">" + object.room + "</p>" +
			"</div>" +
			"</div>";
	}

	$(document).ready(function () {
		$.ajax({
			url: endpoint + "schedule",
			type: "GET",
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			beforeSend: function (xhr) {
				xhr.setRequestHeader('Authorization', 'Bearer ' + sessionStorage.getItem("accessToken"));
			},
			success: function (result) {
				var objects = JSON.parse(result);

				for (h = 8; h <= 18; h += 2) {
					objects.filter(x => x.startTime === h.toString()).forEach(element => {
						element.type = "laborator";
						element.room = "C201";
						$('#h' + h.toString() + " ." + element.day).append(getObjectHtml(element));
					});;
				}
			},
			error: function () {
				alert('Oh-oh! Ceva nu a mers bine!')
			}
		})
	})
</script>

</html>